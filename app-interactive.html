<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈõÜÂÆ¢Ê∂àË≤ªÂõûÈ•ãÂπ≥Âè∞ - ‰∫íÂãïÂºèÊ®°Êì¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-mockup {
            width: 375px;
            height: 812px;
            background: #1a1a1a;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            position: relative;
        }

        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 30px;
            background: #1a1a1a;
            border-radius: 0 0 20px 20px;
            z-index: 10;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 32px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .status-bar {
            height: 44px;
            background: #4a90e2;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 12px;
            padding-top: 8px;
        }

        .header {
            background: #4a90e2;
            color: white;
            padding: 16px 20px;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header .back-btn {
            cursor: pointer;
            font-size: 20px;
        }

        .header .cart-badge {
            position: relative;
        }

        .header .cart-badge .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: bold;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            background: #f5f5f5;
        }

        .content::-webkit-scrollbar {
            width: 0;
        }

        .bottom-nav {
            height: 70px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: 10px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-item:hover {
            background: #f0f0f0;
        }

        .nav-item.active {
            color: #4a90e2;
        }

        .nav-item .badge {
            position: absolute;
            top: 4px;
            right: 8px;
            background: #ff4444;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 9px;
            font-weight: bold;
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 11px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* ÂïÜÂìÅÂç°Áâá */
        .product-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            padding: 16px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .product-card:active {
            transform: scale(0.98);
        }

        .product-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .product-info {
            padding: 12px;
        }

        .product-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .product-price {
            font-size: 20px;
            color: #ff6b6b;
            font-weight: bold;
        }

        .product-price .original {
            font-size: 14px;
            color: #999;
            text-decoration: line-through;
            margin-left: 8px;
        }

        .product-tag {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-bottom: 8px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 12px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 8px;
        }

        .add-to-cart-btn:active {
            background: #3a7bc8;
        }

        /* Ë≥ºÁâ©Ëªä */
        .cart-item {
            background: white;
            padding: 12px;
            margin: 12px;
            border-radius: 12px;
            display: flex;
            gap: 12px;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            background: #f0f0f0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .cart-item-price {
            font-size: 16px;
            color: #ff6b6b;
            margin-bottom: 8px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quantity-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:active {
            background: #f0f0f0;
        }

        .quantity-value {
            font-size: 16px;
            font-weight: bold;
            min-width: 24px;
            text-align: center;
        }

        .cart-summary {
            background: white;
            padding: 16px;
            margin: 12px;
            border-radius: 12px;
        }

        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 15px;
        }

        .cart-summary-row.total {
            font-size: 18px;
            font-weight: bold;
            color: #ff6b6b;
            padding-top: 8px;
            border-top: 1px solid #eee;
        }

        .checkout-btn {
            width: calc(100% - 24px);
            margin: 12px;
            padding: 16px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .checkout-btn:active {
            background: #3a7bc8;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        /* Ë®ÇÂñÆ */
        .order-card {
            background: white;
            padding: 16px;
            margin: 12px;
            border-radius: 12px;
            cursor: pointer;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #eee;
        }

        .order-id {
            font-size: 14px;
            color: #666;
        }

        .order-status {
            font-size: 13px;
            padding: 4px 12px;
            border-radius: 12px;
            font-weight: bold;
        }

        .order-status.completed {
            background: #e8f5e9;
            color: #4caf50;
        }

        .order-status.pending {
            background: #fff3e0;
            color: #ff9800;
        }

        .order-items {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .order-total {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        /* ÊúÉÂì°‰∏≠ÂøÉ */
        .profile-header {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            padding: 24px;
            color: white;
        }

        .profile-avatar {
            width: 64px;
            height: 64px;
            background: white;
            border-radius: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-bottom: 12px;
        }

        .profile-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .profile-id {
            font-size: 13px;
            opacity: 0.9;
        }

        .points-card {
            background: white;
            margin: -20px 16px 16px;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .points-value {
            font-size: 32px;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 4px;
        }

        .points-label {
            font-size: 13px;
            color: #666;
        }

        .menu-list {
            padding: 16px;
        }

        .menu-item {
            background: white;
            padding: 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .menu-item:active {
            background: #f5f5f5;
        }

        .menu-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-item-icon {
            font-size: 24px;
        }

        .menu-item-text {
            font-size: 15px;
            font-weight: 500;
        }

        .menu-item-arrow {
            color: #ccc;
        }

        /* ÂïÜÂìÅË©≥ÊÉÖ */
        .product-detail-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .product-detail-info {
            padding: 20px;
            background: white;
        }

        .product-detail-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .product-detail-price {
            font-size: 28px;
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 16px;
        }

        .product-detail-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .product-options {
            background: white;
            padding: 20px;
            margin-top: 8px;
        }

        .option-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .option-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .option-btn {
            padding: 8px 16px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .option-btn.active {
            border-color: #4a90e2;
            background: #e3f2fd;
            color: #4a90e2;
            font-weight: bold;
        }

        .product-detail-footer {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 16px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 12px;
        }

        /* È¶ñÈ†Å */
        .hero-banner {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            padding: 24px;
            color: white;
            margin-bottom: 16px;
        }

        .hero-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .hero-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ÂïÜÂÆ∂ÂàóË°® */
        .merchant-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            padding: 16px;
        }

        .merchant-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .merchant-card:active {
            transform: scale(0.98);
        }

        .merchant-header {
            display: flex;
            padding: 16px;
            gap: 12px;
        }

        .merchant-icon {
            width: 64px;
            height: 64px;
            background: #f0f0f0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            flex-shrink: 0;
        }

        .merchant-info {
            flex: 1;
        }

        .merchant-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .merchant-category {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .merchant-rating {
            font-size: 13px;
            color: #ff6b6b;
        }

        .merchant-tags {
            display: flex;
            gap: 6px;
            padding: 0 16px 12px;
        }

        .merchant-tag {
            font-size: 11px;
            padding: 4px 10px;
            background: #e3f2fd;
            color: #1976d2;
            border-radius: 12px;
        }

        .merchant-footer {
            padding: 12px 16px;
            background: #f9f9f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: #666;
        }

        .category-tabs {
            display: flex;
            gap: 8px;
            padding: 16px;
            overflow-x: auto;
            background: white;
        }

        .category-tab {
            padding: 8px 16px;
            background: #f0f0f0;
            border-radius: 20px;
            white-space: nowrap;
            cursor: pointer;
            font-size: 14px;
        }

        .category-tab.active {
            background: #4a90e2;
            color: white;
            font-weight: bold;
        }

        /* ÂãïÁï´ */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(-100%);
                opacity: 0;
            }
        }

        .page.slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 14px;
        }

        /* ÂõûÈ•ãÈáëÊî∂ÂÖ•È†ÅÈù¢ */
        .rewards-summary {
            padding: 16px;
        }

        .summary-card {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 16px;
        }

        .summary-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .summary-value {
            font-size: 36px;
            font-weight: bold;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .stat-item {
            background: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: white;
        }

        .section-title {
            font-size: 16px;
            font-weight: bold;
        }

        .month-selector {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 13px;
            background: white;
        }

        .reward-item {
            background: white;
            padding: 16px;
            margin: 0 16px 8px;
            border-radius: 12px;
            border-left: 4px solid #4a90e2;
        }

        .reward-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .reward-type {
            font-size: 15px;
            font-weight: bold;
            color: #333;
        }

        .reward-amount {
            font-size: 18px;
            font-weight: bold;
            color: #4a90e2;
        }

        .reward-amount.positive {
            color: #4caf50;
        }

        .reward-details {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .reward-date {
            font-size: 12px;
            color: #999;
        }

        /* Êé®Ëñ¶Â•ΩÂèãÈ†ÅÈù¢ */
        .referral-header {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            padding: 24px;
            text-align: center;
        }

        .referral-code-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
        }

        .referral-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }

        .referral-code {
            font-size: 32px;
            font-weight: bold;
            color: #4a90e2;
            letter-spacing: 4px;
            margin-bottom: 16px;
        }

        .share-btn {
            width: 100%;
            padding: 12px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .share-btn:active {
            background: #3a7bc8;
        }

        .referral-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            padding: 16px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 8px;
        }

        .referral-item {
            background: white;
            padding: 16px;
            margin: 0 16px 8px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .referral-info {
            flex: 1;
        }

        .referral-name {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .referral-date {
            font-size: 12px;
            color: #999;
        }

        .referral-reward {
            font-size: 16px;
            font-weight: bold;
            color: #4caf50;
        }
    </style>
</head>
<body>
    <div class="phone-mockup">
        <div class="phone-notch"></div>
        <div class="phone-screen">
            <div class="status-bar">
                <span id="current-time">9:41</span>
                <span>üì∂ üì° üîã</span>
            </div>

            <div class="header">
                <span class="back-btn" onclick="goBack()" style="display: none;">‚Üê</span>
                <span id="page-title">ÈõÜÂÆ¢Ê∂àË≤ªÂõûÈ•ãÂπ≥Âè∞</span>
                <span class="cart-badge" onclick="navigateTo('cart')">
                    üõí
                    <span class="badge" id="cart-count" style="display: none;">0</span>
                </span>
            </div>

            <div class="content">
                <!-- È¶ñÈ†Å - ÂïÜÂÆ∂ÂàóË°® -->
                <div id="home" class="page active">
                    <div class="hero-banner">
                        <div class="hero-title">Êé¢Á¥¢ÈôÑËøëÂïÜÂÆ∂</div>
                        <div class="hero-subtitle">Ê∂àË≤ªÂç≥‰∫´ÂõûÈ•ãÔºåÊé®Ëñ¶Â•ΩÂèãË≥∫Êõ¥Â§ö</div>
                    </div>

                    <div class="merchant-grid" id="merchant-list"></div>
                </div>

                <!-- ÂïÜÂÆ∂ÂïÜÂìÅÈ†Å -->
                <div id="merchant-products" class="page">
                    <div class="category-tabs" id="product-categories"></div>
                    <div class="product-grid" id="products-list"></div>
                </div>

                <!-- ÂïÜÂìÅË©≥ÊÉÖÈ†Å -->
                <div id="product-detail" class="page">
                    <div id="product-detail-content"></div>
                </div>

                <!-- Ë≥ºÁâ©Ëªä -->
                <div id="cart" class="page">
                    <div id="cart-content"></div>
                </div>

                <!-- Ë®ÇÂñÆ -->
                <div id="orders" class="page">
                    <div id="orders-content"></div>
                </div>

                <!-- ÊúÉÂì°‰∏≠ÂøÉ -->
                <div id="profile" class="page">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-name">ÂºµÂ∞èÊòé</div>
                        <div class="profile-id">ÊúÉÂì°Á∑®Ëôü: JK202401001</div>
                    </div>

                    <div class="points-card">
                        <div class="points-value" id="user-points">1,250</div>
                        <div class="points-label">ÂèØÁî®ÈªûÊï∏</div>
                    </div>

                    <div class="menu-list">
                        <div class="menu-item" onclick="navigateTo('rewards')">
                            <div class="menu-item-left">
                                <span class="menu-item-icon">üí∞</span>
                                <span class="menu-item-text">ÂõûÈ•ãÈáëÊî∂ÂÖ•</span>
                            </div>
                            <span class="menu-item-arrow">‚Ä∫</span>
                        </div>
                        <div class="menu-item" onclick="showToast('ÂäüËÉΩÈñãÁôº‰∏≠')">
                            <div class="menu-item-left">
                                <span class="menu-item-icon">üìä</span>
                                <span class="menu-item-text">ÁáüÊî∂Áµ±Ë®à</span>
                            </div>
                            <span class="menu-item-arrow">‚Ä∫</span>
                        </div>
                        <div class="menu-item" onclick="navigateTo('referral')">
                            <div class="menu-item-left">
                                <span class="menu-item-icon">üíé</span>
                                <span class="menu-item-text">Êé®Ëñ¶Â•ΩÂèã</span>
                            </div>
                            <span class="menu-item-arrow">‚Ä∫</span>
                        </div>
                        <div class="menu-item" onclick="showToast('ÂäüËÉΩÈñãÁôº‰∏≠')">
                            <div class="menu-item-left">
                                <span class="menu-item-icon">‚öôÔ∏è</span>
                                <span class="menu-item-text">Ë®≠ÂÆö</span>
                            </div>
                            <span class="menu-item-arrow">‚Ä∫</span>
                        </div>
                    </div>
                </div>

                <!-- ÂõûÈ•ãÈáëÊî∂ÂÖ• -->
                <div id="rewards" class="page">
                    <div class="rewards-summary">
                        <div class="summary-card">
                            <div class="summary-label">Êú¨ÊúàÂõûÈ•ãÈáëÊî∂Áõä</div>
                            <div class="summary-value">NT$ <span id="monthly-rewards">3,850</span></div>
                        </div>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <div class="stat-label">Á¥ØË®àÊî∂Áõä</div>
                                <div class="stat-value">NT$ 18,920</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Êú¨Êúà‰∫§Êòì</div>
                                <div class="stat-value">28 Á≠Ü</div>
                            </div>
                        </div>
                    </div>

                    <div class="section-header">
                        <span class="section-title">Êî∂ÂÖ•ÊòéÁ¥∞</span>
                        <select class="month-selector" onchange="filterRewards(this.value)">
                            <option value="2025-10">2025Âπ¥10Êúà</option>
                            <option value="2025-09">2025Âπ¥9Êúà</option>
                            <option value="2025-08">2025Âπ¥8Êúà</option>
                        </select>
                    </div>

                    <div id="rewards-list"></div>
                </div>

                <!-- Êé®Ëñ¶Â•ΩÂèã -->
                <div id="referral" class="page">
                    <div class="referral-header">
                        <div class="referral-code-card">
                            <div class="referral-label">ÊàëÁöÑÊé®Ëñ¶Á¢º</div>
                            <div class="referral-code">JK2024</div>
                            <button class="share-btn" onclick="showToast('Êé®Ëñ¶Á¢ºÂ∑≤Ë§áË£Ω')">ÂàÜ‰∫´Êé®Ëñ¶Á¢º</button>
                        </div>
                    </div>

                    <div class="referral-stats">
                        <div class="stat-card">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Á¥ØË®àÊé®Ëñ¶‰∫∫Êï∏</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">NT$ 1,200</div>
                            <div class="stat-label">Êé®Ëñ¶ÁçéÂãµ</div>
                        </div>
                    </div>

                    <div class="section-header">
                        <span class="section-title">Êé®Ëñ¶Ë®òÈåÑ</span>
                    </div>

                    <div id="referral-list"></div>
                </div>
            </div>

            <div class="bottom-nav">
                <div class="nav-item active" data-page="home">
                    <div class="nav-icon">üè†</div>
                    <div class="nav-label">È¶ñÈ†Å</div>
                </div>
                <div class="nav-item" data-page="cart">
                    <div class="nav-icon">üõí</div>
                    <div class="nav-label">Ë≥ºÁâ©Ëªä</div>
                    <span class="badge" id="nav-cart-count" style="display: none;">0</span>
                </div>
                <div class="nav-item" data-page="orders">
                    <div class="nav-icon">üìã</div>
                    <div class="nav-label">Ë®ÇÂñÆ</div>
                </div>
                <div class="nav-item" data-page="profile">
                    <div class="nav-icon">üë§</div>
                    <div class="nav-label">ÊúÉÂì°</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÂïÜÂÆ∂Êï∏Êìö
        const merchants = [
            {
                id: 1,
                name: 'ÈòøÁæéË∂äÂçóÊ≤≥Á≤â',
                category: 'Ë∂äÂçóÊñôÁêÜ',
                icon: 'üçú',
                rating: '4.8 ‚≠ê',
                distance: '500m',
                deliveryTime: '25-35ÂàÜ',
                tags: ['Â§ñÈÄÅÂÑ™ÊÉ†', '‰∫∫Ê∞£Êé®Ëñ¶', 'ÊªøÈ°çÂÖçÈÅã'],
                products: [1, 2, 3, 4, 5, 6]
            },
            {
                id: 2,
                name: 'ËÄÅÁéãÊª∑Âë≥Â∞èËàñ',
                category: 'Êª∑Âë≥ / Â∞èÂêÉ',
                icon: 'üç¢',
                rating: '4.6 ‚≠ê',
                distance: '800m',
                deliveryTime: '20-30ÂàÜ',
                tags: ['Êñ∞Â∫óÁâπÊÉ†', 'ÂõûÈ•ã5%'],
                products: [7, 8, 9, 10]
            },
            {
                id: 3,
                name: 'ÁèçÁè†Â•∂Ëå∂Â∞àÈñÄÂ∫ó',
                category: 'È£≤Êñô / ÁîúÈªû',
                icon: 'üßã',
                rating: '4.9 ‚≠ê',
                distance: '300m',
                deliveryTime: '15-25ÂàÜ',
                tags: ['Á¨¨‰∫åÊùØÂçäÂÉπ', '‰∫∫Ê∞£ÂïÜÂÆ∂'],
                products: [11, 12, 13]
            },
            {
                id: 4,
                name: 'È¶ôÈõûÊéíÁÇ∏Áâ©',
                category: 'ÁÇ∏Áâ© / ÈÄüÈ£ü',
                icon: 'üçó',
                rating: '4.7 ‚≠ê',
                distance: '1.2km',
                deliveryTime: '30-40ÂàÜ',
                tags: ['Â§ñÈÖ•ÂÖßÂ´©', 'ÁèæÁÇ∏ÁæéÂë≥'],
                products: [14, 15, 16]
            },
            {
                id: 5,
                name: 'Êó•ÂºèÂ£ΩÂè∏Â∞àË≥£',
                category: 'Êó•Êú¨ÊñôÁêÜ',
                icon: 'üç£',
                rating: '4.8 ‚≠ê',
                distance: '600m',
                deliveryTime: '25-35ÂàÜ',
                tags: ['Êñ∞ÈÆÆÁèæÂÅö', 'ÂõûÈ•ã10%'],
                products: [17, 18, 19]
            },
            {
                id: 6,
                name: 'ÂÅ•Â∫∑ËºïÈ£üÂùä',
                category: 'Ê≤ôÊãâ / ËºïÈ£ü',
                icon: 'ü•ó',
                rating: '4.5 ‚≠ê',
                distance: '900m',
                deliveryTime: '20-30ÂàÜ',
                tags: ['ÂÅ•Â∫∑È¶ñÈÅ∏', '‰ΩéÂç°ÁæéÂë≥'],
                products: [20, 21, 22]
            }
        ];

        // ÂïÜÂìÅÊï∏ÊìöÔºàÂåÖÂê´ÊâÄÊúâÂïÜÂÆ∂ÁöÑÂïÜÂìÅÔºâ
        const products = [
            {
                id: 1, merchantId: 1, name: 'ÊãõÁâåÁâõËÇâÊ≤≥Á≤âÂ•óÈ§ê', price: 180, originalPrice: 220, category: 'combo',
                image: 'üçú', description: 'Á≤æÈÅ∏ÁâõËÇâÊê≠ÈÖçQÂΩàÊ≤≥Á≤âÔºåÈôÑË¥àÈ£≤ÊñôËàáÂ∞èËèú', tag: '‰∫∫Ê∞£Á≤æÈÅ∏',
                options: { size: ['Â∞èÁ¢ó', '‰∏≠Á¢ó', 'Â§ßÁ¢ó'], spicy: ['‰∏çËæ£', 'ÂæÆËæ£', '‰∏≠Ëæ£', 'Â§ßËæ£'] }
            },
            { id: 2, merchantId: 1, name: 'Ë∂äÂºèÊò•Êç≤Â•óÈ§ê', price: 150, originalPrice: 180, category: 'combo',
                image: 'ü•ô', description: 'Êñ∞ÈÆÆËî¨ËèúËàáËù¶‰ªÅÁöÑÂÆåÁæéÁµÑÂêà', tag: 'ÁâπÂÉπ',
                options: { quantity: ['2ÂÄã', '4ÂÄã', '6ÂÄã'] }
            },
            { id: 3, merchantId: 1, name: 'Á∂ìÂÖ∏ÁÇíÊ≤≥Á≤â', price: 120, originalPrice: null, category: 'noodles',
                image: 'üçù', description: 'ÂÇ≥Áµ±Ë∂äÂºèÁÇíÊ≤≥Á≤âÔºåÂè£ÊÑüQÂΩà', tag: null,
                options: { spicy: ['‰∏çËæ£', 'ÂæÆËæ£', '‰∏≠Ëæ£'] }
            },
            { id: 4, merchantId: 1, name: 'Ë∂äÂçóÂíñÂï°', price: 60, originalPrice: null, category: 'drinks',
                image: '‚òï', description: 'ÊøÉÈÉÅÈ¶ôÈÜáÁöÑË∂äÂçóÊª¥ÊºèÂíñÂï°', tag: null,
                options: { ice: ['ÁÜ±', 'Ê∫´', 'ÂéªÂÜ∞', 'Â∞ëÂÜ∞', 'Ê≠£Â∏∏ÂÜ∞'] }
            },
            { id: 5, merchantId: 1, name: 'ËäíÊûúÂÜ∞Ê≤ô', price: 80, originalPrice: null, category: 'drinks',
                image: 'ü•≠', description: 'Êñ∞ÈÆÆËäíÊûúË£Ω‰ΩúÔºåÈ¶ôÁîúÂèØÂè£', tag: 'Â§èÊó•ÁâπÈÅ∏',
                options: { size: ['Â∞èÊùØ', '‰∏≠ÊùØ', 'Â§ßÊùØ'] }
            },
            { id: 6, merchantId: 1, name: 'Êµ∑ÈÆÆÁ±≥Á∑ö', price: 160, originalPrice: 190, category: 'noodles',
                image: 'ü¶ê', description: 'Ë±êÂØåÊµ∑ÈÆÆÈÖçÊñôÔºåÊπØÈ†≠ÈÆÆÁæé', tag: 'Êú¨ÈÄ±ÁâπÊÉ†',
                options: { spicy: ['‰∏çËæ£', 'ÂæÆËæ£', '‰∏≠Ëæ£', 'Â§ßËæ£'] }
            },
            // ËÄÅÁéãÊª∑Âë≥
            { id: 7, merchantId: 2, name: 'Êª∑Âë≥ÊãºÁõ§', price: 120, originalPrice: null, category: 'main',
                image: 'üç¢', description: 'Á≤æÈÅ∏Ë±ÜÂπ≤„ÄÅÁ±≥Ë°Ä„ÄÅËî¨ËèúÁ≠â', tag: '‰∫∫Ê∞£Êé®Ëñ¶',
                options: { spicy: ['Â∞èËæ£', '‰∏≠Ëæ£', 'Â§ßËæ£', 'È∫ªËæ£'] }
            },
            { id: 8, merchantId: 2, name: 'È≠ØËÇâÈ£Ø', price: 50, originalPrice: null, category: 'main',
                image: 'üçö', description: 'Á∂ìÂÖ∏È≠ØËÇâÈ£ØÔºåÂøÖÈªûÊãõÁâå', tag: null,
                options: { size: ['Â∞èÁ¢ó', 'Â§ßÁ¢ó'] }
            },
            { id: 9, merchantId: 2, name: 'ÈóúÊù±ÁÖÆ', price: 80, originalPrice: null, category: 'main',
                image: 'üç≤', description: 'Â§öÁ®ÆÈ£üÊùê‰ªªÈÅ∏', tag: null,
                options: { quantity: ['5Ê®£', '8Ê®£', '10Ê®£'] }
            },
            { id: 10, merchantId: 2, name: 'ÈªëË±ÜÊºø', price: 30, originalPrice: null, category: 'drinks',
                image: 'ü•§', description: 'ÊâãÂ∑•Á†îÁ£®ÈªëË±ÜÊºø', tag: null,
                options: { sugar: ['ÁÑ°Á≥ñ', 'ÂæÆÁ≥ñ', 'ÂçäÁ≥ñ', 'ÂÖ®Á≥ñ'] }
            },
            // ÁèçÁè†Â•∂Ëå∂Â∞àÈñÄÂ∫ó
            { id: 11, merchantId: 3, name: 'ÊãõÁâåÁèçÁè†Â•∂Ëå∂', price: 55, originalPrice: null, category: 'drinks',
                image: 'üßã', description: 'QÂΩàÁèçÁè†ÈÖçÊøÉÈÉÅÂ•∂Ëå∂', tag: 'ÂøÖÈªûÊãõÁâå',
                options: { ice: ['ÂéªÂÜ∞', 'ÂæÆÂÜ∞', 'Â∞ëÂÜ∞', 'Ê≠£Â∏∏ÂÜ∞'], sugar: ['ÁÑ°Á≥ñ', 'ÂæÆÁ≥ñ', 'ÂçäÁ≥ñ', 'Â∞ëÁ≥ñ', 'ÂÖ®Á≥ñ'] }
            },
            { id: 12, merchantId: 3, name: 'ÈªëÁ≥ñÈÆÆÂ•∂', price: 60, originalPrice: null, category: 'drinks',
                image: 'ü•õ', description: 'ÊâãÁÇíÈªëÁ≥ñÂä†ÈÆÆÂ•∂', tag: 'Ë∂Ö‰∫∫Ê∞£',
                options: { ice: ['ÂéªÂÜ∞', 'ÂæÆÂÜ∞', 'Â∞ëÂÜ∞', 'Ê≠£Â∏∏ÂÜ∞'] }
            },
            { id: 13, merchantId: 3, name: 'Ê∞¥ÊûúËå∂', price: 65, originalPrice: null, category: 'drinks',
                image: 'üçπ', description: 'Êñ∞ÈÆÆÊ∞¥ÊûúÁèæÊâì', tag: null,
                options: { ice: ['ÂéªÂÜ∞', 'ÂæÆÂÜ∞', 'Â∞ëÂÜ∞', 'Ê≠£Â∏∏ÂÜ∞'], sugar: ['ÁÑ°Á≥ñ', 'ÂæÆÁ≥ñ', 'ÂçäÁ≥ñ', 'Â∞ëÁ≥ñ'] }
            },
            // È¶ôÈõûÊéíÁÇ∏Áâ©
            { id: 14, merchantId: 4, name: 'ÊãõÁâåÈ¶ôÈõûÊéí', price: 70, originalPrice: null, category: 'fried',
                image: 'üçó', description: 'Â§ñÈÖ•ÂÖßÂ´©ÔºåÁèæÁÇ∏ÁÜ±È®∞È®∞', tag: 'ÊãõÁâåÂøÖÈªû',
                options: { spicy: ['‰∏çËæ£', 'ÂæÆËæ£', 'Ëæ£', 'Â§ßËæ£'] }
            },
            { id: 15, merchantId: 4, name: 'ÈπΩÈÖ•Èõû', price: 80, originalPrice: null, category: 'fried',
                image: 'üçñ', description: 'Á∂ìÂÖ∏ÈπΩÈÖ•ÈõûÔºå‰ªΩÈáèÂçÅË∂≥', tag: null,
                options: { size: ['Â∞è‰ªΩ', '‰∏≠‰ªΩ', 'Â§ß‰ªΩ'] }
            },
            { id: 16, merchantId: 4, name: 'ÁÇ∏ËñØÊ¢ù', price: 50, originalPrice: null, category: 'fried',
                image: 'üçü', description: 'ÈáëÈªÉÈÖ•ËÑÜËñØÊ¢ù', tag: null,
                options: { size: ['Â∞è‰ªΩ', '‰∏≠‰ªΩ', 'Â§ß‰ªΩ'] }
            },
            // Êó•ÂºèÂ£ΩÂè∏
            { id: 17, merchantId: 5, name: 'Á∂úÂêàÊè°Â£ΩÂè∏', price: 180, originalPrice: null, category: 'sushi',
                image: 'üç£', description: '8Ë≤´‰∏ªÂªöÁ≤æÈÅ∏', tag: '‰∏ªÂªöÊé®Ëñ¶',
                options: { quantity: ['6Ë≤´', '8Ë≤´', '10Ë≤´'] }
            },
            { id: 18, merchantId: 5, name: 'ÈÆ≠È≠öÂ£ΩÂè∏', price: 150, originalPrice: null, category: 'sushi',
                image: 'üêü', description: 'Êñ∞ÈÆÆÈÆ≠È≠ö', tag: null,
                options: { quantity: ['4Ë≤´', '6Ë≤´', '8Ë≤´'] }
            },
            { id: 19, merchantId: 5, name: 'Âä†Â∑ûÊç≤', price: 120, originalPrice: null, category: 'sushi',
                image: 'üç±', description: 'Á∂ìÂÖ∏Âä†Â∑ûÊç≤', tag: null,
                options: { quantity: ['6ÂÄã', '8ÂÄã', '12ÂÄã'] }
            },
            // ÂÅ•Â∫∑ËºïÈ£ü
            { id: 20, merchantId: 6, name: 'Âá±Ëñ©Ê≤ôÊãâ', price: 120, originalPrice: null, category: 'salad',
                image: 'ü•ó', description: 'Êñ∞ÈÆÆÁîüËèúÈÖçÁ∂ìÂÖ∏Âá±Ëñ©ÈÜ¨', tag: 'ÂÅ•Â∫∑È¶ñÈÅ∏',
                options: { protein: ['ÈõûËÉ∏ËÇâ', 'ÈÆ≠È≠ö', 'Ë±ÜËÖê'] }
            },
            { id: 21, merchantId: 6, name: 'Â∏åËáòÊ≤ôÊãâ', price: 130, originalPrice: null, category: 'salad',
                image: 'ü•ô', description: 'Âú∞‰∏≠Êµ∑È¢®Âë≥', tag: null,
                options: { dressing: ['Ê≤πÈÜãÈÜ¨', 'ÂÑ™Ê†ºÈÜ¨', 'Ê™∏Ê™¨ÈÜ¨'] }
            },
            { id: 22, merchantId: 6, name: 'Á∂úÂêàÊûúÊ±Å', price: 80, originalPrice: null, category: 'drinks',
                image: 'ü•§', description: 'Áï∂Â≠£Ê∞¥ÊûúÁèæÊâì', tag: null,
                options: { size: ['Â∞èÊùØ', '‰∏≠ÊùØ', 'Â§ßÊùØ'] }
            }
        ];

        let cart = [];
        let orders = [];
        let currentPage = 'home';
        let pageHistory = [];
        let currentMerchant = null;

        // ÂõûÈ•ãÈáëË®òÈåÑ
        const rewardsData = [
            { date: '2025-10-16', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 85, orderNo: 'JK1729123456', merchant: 'ÈòøÁæéË∂äÂçóÊ≤≥Á≤â' },
            { date: '2025-10-15', type: 'Êé®Ëñ¶ÁçéÂãµ', amount: 100, orderNo: '-', merchant: 'Êé®Ëñ¶Â•ΩÂèãË®ªÂÜä' },
            { date: '2025-10-14', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 120, orderNo: 'JK1729023456', merchant: 'ËÄÅÁéãÊª∑Âë≥Â∞èËàñ' },
            { date: '2025-10-13', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 65, orderNo: 'JK1728923456', merchant: 'ÁèçÁè†Â•∂Ëå∂Â∞àÈñÄÂ∫ó' },
            { date: '2025-10-12', type: 'ÂàÜÊΩ§ÂõûÈ•ã', amount: 230, orderNo: 'JK1728823456', merchant: 'ÂïÜÂÆ∂ÂàÜÊΩ§' },
            { date: '2025-10-11', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 95, orderNo: 'JK1728723456', merchant: 'È¶ôÈõûÊéíÁÇ∏Áâ©' },
            { date: '2025-10-10', type: 'Êé®Ëñ¶ÁçéÂãµ', amount: 100, orderNo: '-', merchant: 'Êé®Ëñ¶Â•ΩÂèãÈ¶ñË≥º' },
            { date: '2025-10-09', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 150, orderNo: 'JK1728523456', merchant: 'Êó•ÂºèÂ£ΩÂè∏Â∞àË≥£' },
            { date: '2025-10-08', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 75, orderNo: 'JK1728423456', merchant: 'ÂÅ•Â∫∑ËºïÈ£üÂùä' },
            { date: '2025-10-07', type: 'ÂàÜÊΩ§ÂõûÈ•ã', amount: 180, orderNo: 'JK1728323456', merchant: 'ÂïÜÂÆ∂ÂàÜÊΩ§' },
            { date: '2025-10-06', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 110, orderNo: 'JK1728223456', merchant: 'ÈòøÁæéË∂äÂçóÊ≤≥Á≤â' },
            { date: '2025-10-05', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 90, orderNo: 'JK1728123456', merchant: 'ËÄÅÁéãÊª∑Âë≥Â∞èËàñ' },
            { date: '2025-10-04', type: 'Êé®Ëñ¶ÁçéÂãµ', amount: 100, orderNo: '-', merchant: 'Êé®Ëñ¶Â•ΩÂèãË®ªÂÜä' },
            { date: '2025-10-03', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 125, orderNo: 'JK1727923456', merchant: 'È¶ôÈõûÊéíÁÇ∏Áâ©' },
            { date: '2025-10-02', type: 'Ê∂àË≤ªÂõûÈ•ã', amount: 85, orderNo: 'JK1727823456', merchant: 'ÁèçÁè†Â•∂Ëå∂Â∞àÈñÄÂ∫ó' },
        ];

        // Êé®Ëñ¶Ë®òÈåÑ
        const referralData = [
            { name: 'ÁéãÂ∞èÊòé', date: '2025-10-15', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÊùéÂ∞èËèØ', date: '2025-10-10', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÂºµÂ∞èÁæé', date: '2025-10-04', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'Èô≥Â∞èÂº∑', date: '2025-09-28', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÊûóÂ∞èÁé≤', date: '2025-09-22', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÈªÉÂ∞èËä≥', date: '2025-09-15', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'Âê≥Â∞èÂâõ', date: '2025-09-08', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'Âë®Â∞èÊñá', date: '2025-08-30', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÈÑ≠Â∞èÂÇë', date: '2025-08-22', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'ÂäâÂ∞èÈõØ', date: '2025-08-15', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'Ëî°Â∞èÊòé', date: '2025-08-08', reward: 100, status: 'Â∑≤È†òÂèñ' },
            { name: 'Ê•äÂ∞èÁéâ', date: '2025-07-28', reward: 100, status: 'Â∑≤È†òÂèñ' },
        ];

        // Ê∏≤ÊüìÂõûÈ•ãÈáëÂàóË°®
        function renderRewards(month = '2025-10') {
            const container = document.getElementById('rewards-list');
            const filtered = rewardsData.filter(r => r.date.startsWith(month));

            container.innerHTML = filtered.map(reward => `
                <div class="reward-item">
                    <div class="reward-header">
                        <span class="reward-type">${reward.type}</span>
                        <span class="reward-amount positive">+NT$ ${reward.amount}</span>
                    </div>
                    <div class="reward-details">ÂïÜÂÆ∂Ôºö${reward.merchant}</div>
                    <div class="reward-details">Ë®ÇÂñÆÁ∑®ËôüÔºö${reward.orderNo}</div>
                    <div class="reward-date">${reward.date}</div>
                </div>
            `).join('');
        }

        function filterRewards(month) {
            renderRewards(month);
        }

        // Ê∏≤ÊüìÊé®Ëñ¶Ë®òÈåÑÂàóË°®
        function renderReferrals() {
            const container = document.getElementById('referral-list');
            container.innerHTML = referralData.map(referral => `
                <div class="referral-item">
                    <div class="referral-info">
                        <div class="referral-name">${referral.name}</div>
                        <div class="referral-date">${referral.date} Ë®ªÂÜä</div>
                    </div>
                    <div class="referral-reward">+NT$ ${referral.reward}</div>
                </div>
            `).join('');
        }

        // ÂàùÂßãÂåñ
        function init() {
            renderMerchants();
            renderCart();
            renderOrders();
            renderRewards();
            renderReferrals();
            updateCartCount();
            updateTime();
            setInterval(updateTime, 1000);

            // Â∫ïÈÉ®Â∞éËà™ÈªûÊìä‰∫ã‰ª∂
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    navigateTo(this.dataset.page);
                });
            });

            // Âæû localStorage ËÆÄÂèñÊï∏Êìö
            loadData();
        }

        // Ê∏≤ÊüìÂïÜÂÆ∂ÂàóË°®
        function renderMerchants() {
            const container = document.getElementById('merchant-list');
            container.innerHTML = merchants.map(merchant => `
                <div class="merchant-card" onclick="viewMerchant(${merchant.id})">
                    <div class="merchant-header">
                        <div class="merchant-icon">${merchant.icon}</div>
                        <div class="merchant-info">
                            <div class="merchant-name">${merchant.name}</div>
                            <div class="merchant-category">${merchant.category}</div>
                            <div class="merchant-rating">${merchant.rating}</div>
                        </div>
                    </div>
                    <div class="merchant-tags">
                        ${merchant.tags.map(tag => `<span class="merchant-tag">${tag}</span>`).join('')}
                    </div>
                    <div class="merchant-footer">
                        <span>üìç ${merchant.distance}</span>
                        <span>üïê ${merchant.deliveryTime}</span>
                    </div>
                </div>
            `).join('');
        }

        // Êü•ÁúãÂïÜÂÆ∂ÂïÜÂìÅ
        function viewMerchant(merchantId) {
            currentMerchant = merchants.find(m => m.id === merchantId);
            const merchantProducts = products.filter(p => p.merchantId === merchantId);

            // ÂèñÂæóË©≤ÂïÜÂÆ∂ÁöÑÂïÜÂìÅÂàÜÈ°û
            const categories = [...new Set(merchantProducts.map(p => p.category))];

            // Ê∏≤ÊüìÂàÜÈ°ûÊ®ôÁ±§
            const categoriesContainer = document.getElementById('product-categories');
            categoriesContainer.innerHTML = `
                <div class="category-tab active" onclick="filterMerchantProducts('all')">ÂÖ®ÈÉ®</div>
                ${categories.map(cat => `
                    <div class="category-tab" onclick="filterMerchantProducts('${cat}')">${getCategoryName(cat)}</div>
                `).join('')}
            `;

            // Ê∏≤ÊüìÂïÜÂìÅÂàóË°®
            renderMerchantProducts('all');

            // Êõ¥Êñ∞Ê®ôÈ°å
            document.getElementById('page-title').textContent = currentMerchant.name;

            navigateTo('merchant-products');
        }

        function getCategoryName(category) {
            const names = {
                'combo': 'Â•óÈ§ê',
                'noodles': 'È∫µÈ£ü',
                'drinks': 'È£≤ÂìÅ',
                'main': '‰∏ªÈ£ü',
                'fried': 'ÁÇ∏Áâ©',
                'sushi': 'Â£ΩÂè∏',
                'salad': 'Ê≤ôÊãâ'
            };
            return names[category] || category;
        }

        // ÁØ©ÈÅ∏ÂïÜÂÆ∂ÂïÜÂìÅ
        function filterMerchantProducts(category) {
            // Êõ¥Êñ∞ÂàÜÈ°ûÊ®ôÁ±§ÁãÄÊÖã
            document.querySelectorAll('#product-categories .category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            renderMerchantProducts(category);
        }

        // Ê∏≤ÊüìÂïÜÂÆ∂ÂïÜÂìÅÂàóË°®
        function renderMerchantProducts(category = 'all') {
            const container = document.getElementById('products-list');
            const merchantProducts = products.filter(p => p.merchantId === currentMerchant.id);
            const filteredProducts = category === 'all'
                ? merchantProducts
                : merchantProducts.filter(p => p.category === category);

            container.innerHTML = filteredProducts.map(product => `
                <div class="product-card" onclick="viewProduct(${product.id})">
                    ${product.tag ? `<span class="product-tag">${product.tag}</span>` : ''}
                    <div class="product-image" style="display: flex; align-items: center; justify-content: center; font-size: 80px;">
                        ${product.image}
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">
                            $${product.price}
                            ${product.originalPrice ? `<span class="original">$${product.originalPrice}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Êõ¥Êñ∞ÊôÇÈñì
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}`;
        }

        // È†ÅÈù¢Â∞éËà™
        function navigateTo(pageId) {
            const currentPageElement = document.querySelector('.page.active');
            const targetPageElement = document.getElementById(pageId);

            if (currentPageElement === targetPageElement) return;

            // Ë®òÈåÑÊ≠∑Âè≤
            if (currentPage !== pageId) {
                pageHistory.push(currentPage);
            }

            // Èö±ËóèÊâÄÊúâÈ†ÅÈù¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active', 'slide-in');
            });

            // È°ØÁ§∫ÁõÆÊ®ôÈ†ÅÈù¢
            targetPageElement.classList.add('active', 'slide-in');
            currentPage = pageId;

            // Êõ¥Êñ∞Â∞éËà™ÁãÄÊÖã
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === pageId) {
                    item.classList.add('active');
                }
            });

            // Êõ¥Êñ∞Ê®ôÈ°å
            const titles = {
                'home': 'ÈõÜÂÆ¢Ê∂àË≤ªÂõûÈ•ãÂπ≥Âè∞',
                'cart': 'Ë≥ºÁâ©Ëªä',
                'orders': 'ÊàëÁöÑË®ÇÂñÆ',
                'profile': 'ÊúÉÂì°‰∏≠ÂøÉ',
                'product-detail': 'ÂïÜÂìÅË©≥ÊÉÖ',
                'merchant-products': currentMerchant ? currentMerchant.name : 'ÂïÜÂìÅÂàóË°®',
                'rewards': 'ÂõûÈ•ãÈáëÊî∂ÂÖ•',
                'referral': 'Êé®Ëñ¶Â•ΩÂèã'
            };
            document.getElementById('page-title').textContent = titles[pageId] || 'ÈõÜÂÆ¢Ê∂àË≤ªÂõûÈ•ãÂπ≥Âè∞';

            // È°ØÁ§∫/Èö±ËóèËøîÂõûÊåâÈàï
            const backBtn = document.querySelector('.back-btn');
            if (pageId === 'product-detail' || pageId === 'merchant-products' || pageId === 'rewards' || pageId === 'referral') {
                backBtn.style.display = 'inline';
            } else {
                backBtn.style.display = 'none';
            }

            // Âà∑Êñ∞ÂÖßÂÆπ
            if (pageId === 'cart') renderCart();
            if (pageId === 'orders') renderOrders();
        }

        // ËøîÂõû
        function goBack() {
            if (pageHistory.length > 0) {
                const previousPage = pageHistory.pop();
                navigateTo(previousPage);
            }
        }


        // Êü•ÁúãÂïÜÂìÅË©≥ÊÉÖ
        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const content = document.getElementById('product-detail-content');
            content.innerHTML = `
                <div class="product-detail-image" style="display: flex; align-items: center; justify-content: center; font-size: 120px;">
                    ${product.image}
                </div>
                <div class="product-detail-info">
                    ${product.tag ? `<span class="product-tag">${product.tag}</span>` : ''}
                    <div class="product-detail-name">${product.name}</div>
                    <div class="product-detail-price">
                        $${product.price}
                        ${product.originalPrice ? `<span style="font-size: 18px; color: #999; text-decoration: line-through; margin-left: 8px;">$${product.originalPrice}</span>` : ''}
                    </div>
                    <div class="product-detail-desc">${product.description}</div>
                </div>

                ${Object.keys(product.options).map(optionKey => `
                    <div class="product-options">
                        <div class="option-title">${getOptionTitle(optionKey)}</div>
                        <div class="option-buttons">
                            ${product.options[optionKey].map((option, index) => `
                                <button class="option-btn ${index === 0 ? 'active' : ''}"
                                        onclick="selectOption(this, '${optionKey}', '${option}')">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `).join('')}

                <div class="product-detail-footer">
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
                        <span class="quantity-value" id="detail-quantity">1</span>
                        <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
                    </div>
                    <button class="add-to-cart-btn" style="flex: 1;" onclick="addToCart(${product.id})">
                        Âä†ÂÖ•Ë≥ºÁâ©Ëªä
                    </button>
                </div>
            `;

            navigateTo('product-detail');
        }

        function getOptionTitle(key) {
            const titles = {
                'size': 'ÈÅ∏ÊìáÂ§ßÂ∞è',
                'spicy': 'Ëæ£Â∫¶',
                'ice': 'ÂÜ∞Â°ä',
                'quantity': 'Êï∏Èáè'
            };
            return titles[key] || key;
        }

        function selectOption(button, optionKey, optionValue) {
            // ÁßªÈô§ÂêåÁµÑÂÖ∂‰ªñÊåâÈàïÁöÑ active ÁãÄÊÖã
            button.parentElement.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
        }

        function changeQuantity(delta) {
            const quantityEl = document.getElementById('detail-quantity');
            let quantity = parseInt(quantityEl.textContent);
            quantity = Math.max(1, quantity + delta);
            quantityEl.textContent = quantity;
        }

        // Âä†ÂÖ•Ë≥ºÁâ©Ëªä
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const quantity = parseInt(document.getElementById('detail-quantity').textContent);

            // Êî∂ÈõÜÈÅ∏È†Ö
            const selectedOptions = {};
            document.querySelectorAll('.product-options').forEach(optionGroup => {
                const title = optionGroup.querySelector('.option-title').textContent;
                const selected = optionGroup.querySelector('.option-btn.active').textContent;
                selectedOptions[title] = selected;
            });

            // Ê™¢Êü•Ë≥ºÁâ©Ëªä‰∏≠ÊòØÂê¶Â∑≤ÊúâÁõ∏ÂêåÂïÜÂìÅÔºàÂê´ÈÅ∏È†ÖÔºâ
            const existingItem = cart.find(item =>
                item.product.id === productId &&
                JSON.stringify(item.options) === JSON.stringify(selectedOptions)
            );

            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    product: product,
                    quantity: quantity,
                    options: selectedOptions
                });
            }

            saveData();
            updateCartCount();
            showToast(`Â∑≤Âä†ÂÖ• ${quantity} ÂÄãÂïÜÂìÅÂà∞Ë≥ºÁâ©Ëªä`);
            goBack();
        }

        // Ê∏≤ÊüìË≥ºÁâ©Ëªä
        function renderCart() {
            const container = document.getElementById('cart-content');

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <div>Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑ</div>
                        <div style="margin-top: 8px; font-size: 13px;">Âø´ÂéªÊåëÈÅ∏ÂñúÊ≠°ÁöÑÂïÜÂìÅÂêßÔºÅ</div>
                    </div>
                `;
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);

            container.innerHTML = `
                ${cart.map((item, index) => `
                    <div class="cart-item">
                        <div class="cart-item-image" style="display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            ${item.product.image}
                        </div>
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.product.name}</div>
                            ${Object.entries(item.options).map(([key, value]) =>
                                `<div style="font-size: 12px; color: #999;">${key}: ${value}</div>`
                            ).join('')}
                            <div class="cart-item-price">$${item.product.price}</div>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, -1)">-</button>
                                <span class="quantity-value">${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, 1)">+</button>
                            </div>
                        </div>
                    </div>
                `).join('')}

                <div class="cart-summary">
                    <div class="cart-summary-row">
                        <span>Â∞èË®à</span>
                        <span>$${subtotal}</span>
                    </div>
                    <div class="cart-summary-row">
                        <span>Â§ñÈÄÅË≤ª</span>
                        <span>$30</span>
                    </div>
                    <div class="cart-summary-row total">
                        <span>Á∏ΩË®à</span>
                        <span>$${subtotal + 30}</span>
                    </div>
                </div>

                <button class="checkout-btn" onclick="checkout()">
                    ÂâçÂæÄÁµêÂ∏≥
                </button>
            `;
        }

        // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÂïÜÂìÅÊï∏Èáè
        function updateCartItemQuantity(index, delta) {
            cart[index].quantity = Math.max(1, cart[index].quantity + delta);

            if (cart[index].quantity === 0) {
                cart.splice(index, 1);
            }

            saveData();
            updateCartCount();
            renderCart();
        }

        // ÁµêÂ∏≥
        function checkout() {
            if (cart.length === 0) return;

            const subtotal = cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);
            const total = subtotal + 30;

            const order = {
                id: 'JK' + Date.now(),
                date: new Date().toLocaleString('zh-TW'),
                items: [...cart],
                subtotal: subtotal,
                deliveryFee: 30,
                total: total,
                status: 'pending',
                statusText: 'ÂæÖÁ¢∫Ë™ç'
            };

            orders.unshift(order);
            cart = [];

            saveData();
            updateCartCount();
            showToast('Ë®ÇÂñÆÂ∑≤ÈÄÅÂá∫ÔºÅ');

            setTimeout(() => {
                navigateTo('orders');
            }, 1000);
        }

        // Ê∏≤ÊüìË®ÇÂñÆÂàóË°®
        function renderOrders() {
            const container = document.getElementById('orders-content');

            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <div>ÈÇÑÊ≤íÊúâË®ÇÂñÆ</div>
                        <div style="margin-top: 8px; font-size: 13px;">Âø´Âéª‰∏ãÂñÆÂêßÔºÅ</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = orders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-id">Ë®ÇÂñÆÁ∑®Ëôü: ${order.id}</div>
                        <div class="order-status ${order.status}">${order.statusText}</div>
                    </div>
                    <div class="order-items">
                        ${order.items.map(item =>
                            `${item.product.name} x${item.quantity}`
                        ).join('„ÄÅ')}
                    </div>
                    <div style="font-size: 13px; color: #999; margin-bottom: 8px;">${order.date}</div>
                    <div class="order-total">Á∏ΩÈáëÈ°ç: $${order.total}</div>
                </div>
            `).join('');
        }

        // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÊï∏ÈáèÈ°ØÁ§∫
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const badges = [
                document.getElementById('cart-count'),
                document.getElementById('nav-cart-count')
            ];

            badges.forEach(badge => {
                if (count > 0) {
                    badge.textContent = count;
                    badge.style.display = 'block';
                } else {
                    badge.style.display = 'none';
                }
            });
        }

        // È°ØÁ§∫ÊèêÁ§∫Ë®äÊÅØ
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 2000);
        }

        // ÂÑ≤Â≠òÊï∏ÊìöÂà∞ localStorage
        function saveData() {
            localStorage.setItem('cart', JSON.stringify(cart));
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        // Âæû localStorage ËÆÄÂèñÊï∏Êìö
        function loadData() {
            const savedCart = localStorage.getItem('cart');
            const savedOrders = localStorage.getItem('orders');

            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartCount();
            }

            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
        }

        // ÂàùÂßãÂåñÊáâÁî®
        init();
    </script>
</body>
</html>
